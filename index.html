<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAMAAAC8Y9NQAAAAflBMVEUAAAD///+ZzP8Anf8Aov8Amv8AlP8Aqv8Aru8Anv8Amf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8Anf8+S878AAAALHRSTlMAAgMEBQYICQoLDA0ODxITFBUWFxgZGhscHR4fICEiIyQlJicoKSorLC0uLzAyYm98AAADfklEQVR42u2b2ZKiMBSG6Y6ICwiCuyK7oiIu77/S6YI6pS0SuAnTOf9vXpIsS/6T9CStVAsLCwsLCwsLCwsLC5vIdI59f6E9yGofBclKjO8T36Y9x5ovp3W9v6D9L1Hk++Fm62v7X+K680U2qfX+gnSAnX6W6v0FCXp/QTrA82T6pPr67/8LkuM8nU6fA+MvSJDmP9Ppc+A9Vf8XJMn0fDqdPmP9X5CcTOfp9Bmz/oKkkOnV6TNR/xc0S86m06fA7P8LmmM6nz4DZv9f0DyfptOnwGf8Bcm5m6fT58Bl/AXJWZpOnwPn8RckZ0un0+fAefwFyVkt06fA97v6779z/3f0v/P0Of9vSJK5/f7D3P4/p86Xf9m+f9L5/knnf9L5/knnf9L5/knnf9L5/knnf9L5/knnf9L5/knnf/L5fX069/90Wf/H38B1X7R+B8XnE4vPZ7Otz2Zdn82mPptVfTar+mxW9dlmS6U5WyrN2VJpzpZK602ltN5USutNpbTeVErrTaW03lRar7XGfK015mutMV9rjflaY77WGPu7mGv7u5hr+7uYa/u7mGv7u5hr+7uY6zNrrM+ssT6zxvrMGuszS6y9Zom11yyx9poly6+9Zvn/sSXL/48tWf5/bMny/2NLlv8fW7L879iS5X/Hlv0Y2Y+R/RjZj5H9GNmPkf0Y2Y+R/RjZj/FfjP9i/Bfjv8i6XWSV3v9R/m399/Xf139f/3399/Xf139f/3399/Xf13/fvK79fS6V6eey6ee0qWfLpp4Nm3oWbOoZsqknxaaeCJt6Amzqy7Sps6LOijoruqyosqLOiior6qyosqLOitqzYvf82D07ds+O3bNj9+zYPTt2z47ds2P37Ni99V67t9xr95Z77d5yr91b7rV7y712b7nX7i332r1NfS99p/0X+S/yX+S/yH+R/yL/Rf6L/Bf5L/Jf5L/Y0mRLky1NtjTZ0mRLky1NtjTZ0mRLky1NtjTZ0mRLky1NtjSZY5o5ZkYzw8xoZpAZTQwyw8hgMwwMNoPAYDMIDDZZZZNFFllkkUUWWWSRRRZZZJFFFllkkUUWWWSRRRY9iR5Ej6EH0UPoMfQQegy9jV5G76KX0avoXfQqeveS99DL6DX0MnoVvYreRS+iV9Gr6F30InoRvYhe/Vf9Ay7R9U9L6v9/AAAA//8DAIDU9P++nO5VAAAAAElFTkSuQmCC">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>æ±ºç­–å°åŠ©æ‰‹</title>
    <style>
        :root { --bg: #FFF5E6; --card-bg: #FFFFFF; --text: #333; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); margin: 0; padding: env(safe-area-inset-top) 20px 20px; box-sizing: border-box; }
        .header { text-align: center; padding: 20px 0; position: relative; }
        .back-btn { position: absolute; left: 0; top: 25px; display: none; background: #EEE; border: none; padding: 5px 12px; border-radius: 10px; font-weight: bold; }
        
        /* é¦–é ä¹å®®æ ¼é¢¨æ ¼ */
        .main-menu { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px; }
        .menu-card { background: var(--card-bg); border-radius: 20px; padding: 25px 15px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: 0.2s; cursor: pointer; }
        .menu-card:active { transform: scale(0.95); }
        .menu-card .icon { font-size: 40px; margin-bottom: 10px; }
        .menu-card .title { font-weight: bold; font-size: 16px; }
        .menu-card.big { grid-column: span 2; display: flex; align-items: center; justify-content: center; gap: 20px; }

        /* åŠŸèƒ½åˆ†é  */
        .page { display: none; animation: fadeIn 0.3s; }
        .active-page { display: block; }

        /* å…±ç”¨åŠŸèƒ½æ¨£å¼ */
        .result-box { background: #FFF; border: 3px dashed #FF9500; border-radius: 25px; padding: 40px 10px; margin: 20px 0; text-align: center; font-size: 32px; font-weight: bold; color: #FF4500; }
        .action-btn { background: #1C1C1E; color: white; border: none; width: 100%; padding: 18px; border-radius: 15px; font-size: 18px; font-weight: bold; cursor: pointer; }
        .search-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 15px; }
        .search-btn { padding: 12px; border-radius: 10px; text-decoration: none; color: white; font-size: 14px; text-align: center; font-weight: bold; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="header">
        <button id="backBtn" class="back-btn" onclick="showHome()">â† è¿”å›</button>
        <h2 id="pageTitle">æ±ºç­–å°åŠ©æ‰‹</h2>
    </div>

    <div id="homePage" class="page active-page">
        <div class="main-menu">
            <div class="menu-card big" onclick="openPage('food', 'ğŸ´ åƒä»€éº¼')">
                <div class="icon">ğŸ±</div>
                <div class="title">åƒè²¨ç¥å™¨</div>
            </div>
            <div class="menu-card" onclick="openPage('play', 'ğŸš— å»å“ªç©')">
                <div class="icon">ğŸ¡</div>
                <div class="title">å»å“ªç©å…’</div>
            </div>
            <div class="menu-card" onclick="openPage('dice', 'ğŸ² æ“²éª°å­')">
                <div class="icon">ğŸ²</div>
                <div class="title">éš¨æ©Ÿæ“²éª°</div>
            </div>
            <div class="menu-card" onclick="openPage('truth', 'ğŸ¤« çœŸå¿ƒè©±')">
                <div class="icon">ğŸ’¬</div>
                <div class="title">çœŸå¿ƒè©±</div>
            </div>
            <div class="menu-card" onclick="openPage('dare', 'ğŸ”¥ å¤§å†’éšª')">
                <div class="icon">ğŸ­</div>
                <div class="title">å¤§å†’éšª</div>
            </div>
        </div>
    </div>

    <div id="foodPage" class="page">
        <div class="result-box" id="foodResult">ï¼Ÿ</div>
        <button class="action-btn" onclick="roll('food')">é–‹å§‹æŠ½å–</button>
        <div id="foodSearch" class="search-grid" style="display:none">
            <a id="mSearch" class="search-btn" style="background:#FFD000;color:#333">ç¾åœ˜</a>
            <a id="dSearch" class="search-btn" style="background:#FF6633">é»è©•</a>
            <a id="gSearch" class="search-btn" style="background:#34A853">Google</a>
            <button class="search-btn" style="background:#5856D6" onclick="share('food')">åˆ†äº«</button>
        </div>
    </div>

    <div id="playPage" class="page">
        <div class="result-box" id="playResult">ï¼Ÿ</div>
        <button class="action-btn" onclick="roll('play')">çœ‹çœ‹å»å“ªå…’</button>
        <div id="playSearch" class="search-grid" style="display:none">
            <a id="pMap" class="search-btn" style="background:#007AFF; grid-column: span 2;">åœ¨åœ°åœ–ä¸­æŸ¥çœ‹ä½ç½®</a>
        </div>
    </div>

    <div id="simplePage" class="page">
        <div class="result-box" id="simpleResult">ï¼Ÿ</div>
        <button id="simpleBtn" class="action-btn">é»æ“Šé–‹å§‹</button>
    </div>

<script>
    const data = {
        food: ["éº»è¾£ç«é‹", "æ—¥å¼æ‹‰éºµ", "ç‚¸é›æ¼¢å ¡", "ç‰›è‚‰éºµ", "é…¸èœé­š", "è¿´è½‰å£½å¸"],
        play: ["çœ‹é›»å½±", "é€›ç™¾è²¨å…¬å¸", "å”±KTV", "å»çˆ¬å±±", "æ²³é‚Šæ•£æ­¥", "å»éŠæ¨‚åœ’", "å¯†å®¤é€ƒè„«"],
        dice: ["1", "2", "3", "4", "5", "6"],
        truth: ["æ‰‹æ©Ÿè£¡æœ€å¾Œä¸€å¼µç…§ç‰‡æ˜¯å•¥", "æœ€ç³—çš„ä¸€ä»¶äº‹", "åˆå»åœ¨å¹¾æ­²", "ç¾å ´æŒ‘ä¸€å€‹ç•°æ€§å°è¦–"],
        dare: ["æ¨¡ä»¿çŒ©çŒ©å«", "çµ¦é€šè¨ŠéŒ„ç¬¬ä¸‰äººæ‰“é›»è©±", "å°å¤–å¤§å–Šæˆ‘æ˜¯ç¬¨è›‹", "åš10å€‹ä¼åœ°æŒºèº«"]
    };

    let currentChoice = "";

    function openPage(pageId, title) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
        document.getElementById('backBtn').style.display = 'block';
        document.getElementById('pageTitle').innerText = title;

        if(pageId === 'food') {
            document.getElementById('foodPage').classList.add('active-page');
        } else if(pageId === 'play') {
            document.getElementById('playPage').classList.add('active-page');
        } else {
            document.getElementById('simplePage').classList.add('active-page');
            document.getElementById('simpleBtn').onclick = () => rollSimple(pageId);
        }
    }

    function showHome() {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
        document.getElementById('homePage').classList.add('active-page');
        document.getElementById('backBtn').style.display = 'none';
        document.getElementById('pageTitle').innerText = 'æ±ºç­–å°åŠ©æ‰‹';
    }

    function roll(type) {
        const list = data[type];
        const resEl = document.getElementById(type + 'Result');
        const searchEl = document.getElementById(type + 'Search');
        searchEl.style.display = 'none';

        let count = 0;
        const timer = setInterval(() => {
            resEl.innerText = list[Math.floor(Math.random() * list.length)];
            if(count++ > 12) {
                clearInterval(timer);
                currentChoice = list[Math.floor(Math.random() * list.length)];
                resEl.innerText = "âœ¨ " + currentChoice;
                searchEl.style.display = 'grid';
                if(type === 'food') updateFoodLinks();
                if(type === 'play') updatePlayLinks();
            }
        }, 60);
    }

    function rollSimple(type) {
        const list = data[type];
        const resEl = document.getElementById('simpleResult');
        let count = 0;
        const timer = setInterval(() => {
            resEl.innerText = list[Math.floor(Math.random() * list.length)];
            if(count++ > 10) {
                clearInterval(timer);
                resEl.innerText = "âœ¨ " + list[Math.floor(Math.random() * list.length)];
            }
        }, 60);
    }

    function updateFoodLinks() {
        const encoded = encodeURIComponent(currentChoice);
        document.getElementById('mSearch').href = `imeituan://www.meituan.com/s/s?w=${encoded}`;
        document.getElementById('dSearch').href = `dianping://search?keyword=${encoded}`;
        document.getElementById('gSearch').href = `http://maps.google.com/?q=${encoded}`;
    }

    function updatePlayLinks() {
        document.getElementById('pMap').href = `http://maps.google.com/?q=${encodeURIComponent(currentChoice)}`;
    }

    function share(type) {
        if (navigator.share) {
            navigator.share({ title: 'æ±ºç­–çµæœ', text: `æˆ‘çš„æ±ºç­–å°åŠ©æ‰‹å»ºè­°ï¼š${currentChoice}`, url: window.location.href });
        }
    }
</script>
</body>
</html>
